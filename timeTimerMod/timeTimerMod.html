<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="timeTimerMod.css">
</head>
<body>
    <canvas class="canvas"></canvas>
    <div class="timerSection">
        <input class="setMinutes" type="number" min="1" max="60"><span class="timeLeft">남은시간 표시할 곳</span><span>분</span>
        <div class="beforeStartBtnSection">
            <button class="timerStartBtn">타이머 시작</button>
            <button>다크모드</button>
            <button>숫자표시</button>
        </div>
        <div class="afterStartBtnSection">
            <button>타이머 일시정지</button>
            <button>타이머 다시시작</button>
            <button>타이머 초기화(정지)</button>
            <button>다크모드</button>
            <button>숫자표시</button>
        </div>
    </div>
    <div class="numbersOnClock">
        12,1,2,3,4,5,6,7,8,9,10,11
    </div>
    <script>
      const $canvas = document.querySelector(".canvas");
      const $setMinutes = document.querySelector(".setMinutes");
      const $timerStartBtn = document.querySelector(".timerStartBtn")

      const ctx = $canvas.getContext("2d");

      const lineWidth = 15;
      const lineColor = 'red';

      let lines = []

      function resizeCanvas() {
        $canvas.width = window.innerWidth;
        $canvas.height = window.innerHeight;
      }

      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      let minutes, seconds;


        function drawClock() {
            // 화면 지우는 로직
            // ctx.clearRect(0, 0, $canvas.width, $canvas.height);

            // 중심점 구하기
            const centerX = $canvas.width / 2;
            const centerY = $canvas.height / 2;

            // 현재 시간 구하기
            const now = new Date();

            const hours = now.getHours();
            minutes = now.getMinutes();
            seconds = now.getSeconds();
            
            //실수로 개발자 도구 열었을 때를 대비한 localStorage에 넣어놓을 값.
            let nowPositionX;
            let nowPositionY;

            //분침이동로직
            // 시계 바늘 그리기
            ctx.beginPath();
            ctx.moveTo(centerX, centerY); // 원점 설정(여기서는 centerX, centerY 기준으로)
            // lineTo >> 원점기준으로 어디로 그릴건지? lineTO한번더 쓰면 그다음은 어디로 그릴건지!
            ctx.lineTo(
                // sin(k) = b/r일때 b는 y좌표를 나타낸다. b는 즉 r * sin(k). 이때 sin(각도) * r로 하고자 하는 값을 곱해주면 나타내고자 하는 값의 y좌표가 된다.
                centerX + Math.sin((minutes / 60 + seconds / 3600 - 0.25) * 2 * Math.PI) * 1000,
                centerY - Math.cos((minutes / 60 + seconds / 3600 - 0.25) * 2 * Math.PI) * 1000
            );

            ctx.lineWidth = lineWidth;
            ctx.strokeStyle = lineColor;
            ctx.stroke();

        // 다시 그리기
            setTimeout(drawClock, 1000/60)
      }

      drawClock()

      document.addEventListener("visibilitychange", () => {
        if (document.visibilityState !== "visible") {
            console.log(minutes,'분 ' ,seconds,'초')
        }
        });
    </script>
    
</body>
</html>