<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>musicPlayer</title>
    <link rel="stylesheet" href="musicPlayer.css">
</head>
<body>
    <div class="onPlayingSection">
        <div id="video"></div><br />
        <div class="videoBtnSection">
            <button type="button" onclick="playYoutube();">Play</button>
            <button type="button" onclick="pauseYoutube();">Pause</button>
            <button type="button" onclick="stopYoutube();">Stop</button>
            <button type="button">Before</button>
            <button type="button">After</button>
        </div>
    </div>
    <div class="playListSection">
        <div class="musicBox">
            <div>logo</div>
            <div>title</div>
            <div>length</div>
        </div>
    </div>
      <script>
        // Youtube API 
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        /**
         * onYouTubeIframeAPIReady 함수는 필수로 구현해야 한다.
         * 플레이어 API에 대한 JavaScript 다운로드 완료 시 API가 이 함수 호출한다.
         * 페이지 로드 시 표시할 플레이어 개체를 만들어야 한다.
         */
        var player;
        function onYouTubeIframeAPIReady () {
            player = new YT.Player('video', {
                height: '350',            // <iframe> 태그 지정시 필요없음
                width: '650',             // <iframe> 태그 지정시 필요없음
                videoId: '9bZkp7q19f0',   // <iframe> 태그 지정시 필요없음
                playerVars: {             // <iframe> 태그 지정시 필요없음
                    controls: '2'
                    },
                events: {
                'onReady': onPlayerReady,               // 플레이어 로드가 완료되고 API 호출을 받을 준비가 될 때마다 실행
                'onStateChange': onPlayerStateChange    // 플레이어의 상태가 변경될 때마다 실행
                }
            });
        }
        console.log(onYouTubeIframeAPIReady ())

        function onPlayerReady (event) {
            // 준비되면 바로 시작
            // event.target.playVideo();
        }

        var done = false;
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
                done = true;
            }
        }

        function playYoutube () {
            player.playVideo();
        }

        function pauseYoutube () {
            player.pauseVideo();
        }

        function stopYoutube () {
            player.seekTo(0, true);     // 영상의 시간을 0초로 이동시킨다.
            player.stopVideo();
        }

        // let played = false;
        // function collectPlayCount (data) {
        // if (data == YT.PlayerState.PLAYING && played == false) {
        //     // todo statistics
        //     played = true;
        //     console.log('statistics');
        // }
        // }
      </script>
</body>
</html>